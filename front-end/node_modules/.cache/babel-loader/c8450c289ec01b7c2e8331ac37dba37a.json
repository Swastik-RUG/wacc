{"ast":null,"code":"import _toConsumableArray from \"/home/swastik/workspace/gitRepo/wacc/2019_group_30_s4151968_s4056167_s3922782/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/swastik/workspace/gitRepo/wacc/2019_group_30_s4151968_s4056167_s3922782/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/swastik/workspace/gitRepo/wacc/2019_group_30_s4151968_s4056167_s3922782/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/swastik/workspace/gitRepo/wacc/2019_group_30_s4151968_s4056167_s3922782/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/swastik/workspace/gitRepo/wacc/2019_group_30_s4151968_s4056167_s3922782/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/swastik/workspace/gitRepo/wacc/2019_group_30_s4151968_s4056167_s3922782/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/swastik/workspace/gitRepo/wacc/2019_group_30_s4151968_s4056167_s3922782/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/swastik/workspace/gitRepo/wacc/2019_group_30_s4151968_s4056167_s3922782/front-end/src/containers/dashboard/dashboard.js\";\nimport React, { Fragment } from 'react';\nimport NavBar from '../navbar/navbar';\nimport { ResponsiveBar } from '@nivo/bar';\nimport { ResponsivePie } from '@nivo/pie';\nimport { Row, Col, ProgressBar } from 'react-bootstrap';\nimport { MainBody, AddAppliance, AddApplianceContainer, AddButton } from './dashboardStyles';\nimport axios from 'axios';\nimport GaugeChart from 'react-gauge-chart';\nimport { toast, ToastContainer } from 'react-toastify';\nimport settings from '../../config/config';\nimport DataTable from 'react-data-table-component';\n\nvar Dashboard =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Dashboard, _React$Component);\n\n  function Dashboard(props) {\n    var _this;\n\n    _classCallCheck(this, Dashboard);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Dashboard).call(this, props));\n\n    _this.addMessage = function (message) {\n      return _this.setState(function (state) {\n        return {\n          messages: [message].concat(_toConsumableArray(state.messages))\n        };\n      });\n    };\n\n    _this.submitMessage = function (messageString) {\n      // on submitting the ChatInput form, send the message, add it to the list and reset the input\n      var message = {\n        name: _this.state.name,\n        message: messageString\n      };\n\n      _this.ws.send(JSON.stringify(message));\n\n      _this.addMessage(message);\n    };\n\n    _this.renderPieChart = function () {\n      var pieJson = _this.state.pieJson;\n\n      if (pieJson) {\n        return React.createElement(ResponsivePie, {\n          data: _this.state.pieJson,\n          margin: {\n            top: 40,\n            right: 80,\n            bottom: 80,\n            left: 80\n          },\n          innerRadius: 0.6,\n          padAngle: 0.7,\n          cornerRadius: 3,\n          colors: {\n            scheme: 'category10'\n          },\n          borderWidth: 1,\n          borderColor: {\n            from: 'color',\n            modifiers: [['darker', 0.2]]\n          },\n          enableRadialLabels: false,\n          radialLabelsSkipAngle: 10,\n          radialLabelsTextXOffset: 6,\n          radialLabelsTextColor: \"#333333\",\n          radialLabelsLinkOffset: 0,\n          radialLabelsLinkDiagonalLength: 16,\n          radialLabelsLinkHorizontalLength: 24,\n          radialLabelsLinkStrokeWidth: 1,\n          radialLabelsLinkColor: {\n            from: 'color'\n          },\n          slicesLabelsSkipAngle: 10,\n          slicesLabelsTextColor: \"#333333\",\n          animate: true,\n          motionStiffness: 90,\n          motionDamping: 15,\n          legends: [{\n            anchor: 'bottom',\n            direction: 'row',\n            translateY: 56,\n            itemWidth: 100,\n            itemHeight: 50,\n            itemTextColor: '#000',\n            symbolSize: 20,\n            symbolShape: 'circle',\n            effects: [{\n              on: 'hover',\n              style: {\n                itemTextColor: '#000'\n              }\n            }]\n          }],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        });\n      } else {\n        return _this.renderErrorMessage();\n      }\n    };\n\n    _this.renderErrorMessage = function () {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, \"Something went wrong!\");\n    };\n\n    _this.renderBarChart = function () {\n      var energyResult = _this.state.energyResult;\n\n      if (energyResult.length > 0) {\n        return React.createElement(ResponsiveBar, {\n          data: _this.state.energyResult,\n          keys: ['watt'],\n          indexBy: \"appliance\",\n          margin: {\n            top: 50,\n            right: 50,\n            bottom: 50,\n            left: 100\n          },\n          padding: 0.2,\n          layout: \"horizontal\",\n          colors: {\n            scheme: 'category10'\n          },\n          borderRadius: 2,\n          borderWidth: 2,\n          borderColor: {\n            from: 'color',\n            modifiers: [['darker', 1.6]]\n          },\n          axisTop: null,\n          axisRight: null,\n          axisBottom: null,\n          axisLeft: {\n            tickSize: 0,\n            tickPadding: 4,\n            tickRotation: 0,\n            legendPosition: 'middle'\n          },\n          labelSkipWidth: 12,\n          labelSkipHeight: 12,\n          labelTextColor: {\n            from: 'color',\n            modifiers: [['darker', 5.6]]\n          },\n          animate: true,\n          motionStiffness: 90,\n          motionDamping: 15,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229\n          },\n          __self: this\n        });\n      } else {\n        return _this.renderErrorMessage();\n      }\n    };\n\n    _this.handleApplianceName = function (e) {\n      _this.setState({\n        applianceName: e.target.value\n      });\n    };\n\n    _this.handleApplianceWattage = function (e) {\n      _this.setState({\n        applianceWattage: e.target.value\n      });\n    };\n\n    _this.resetValues = function () {\n      _this.setState({\n        applianceWattage: '',\n        applianceName: ''\n      });\n    };\n\n    _this.makeAddApplianceCall = function (e) {\n      e.preventDefault();\n      var _this$state = _this.state,\n          applianceName = _this$state.applianceName,\n          applianceWattage = _this$state.applianceWattage;\n      var url = \"\".concat(settings.API_URL, \"/addAppliance/\").concat(applianceName, \"/\").concat(applianceWattage);\n      axios.post(url).then(function (response) {\n        _this.resetValues();\n\n        toast.success(\"Successfully added Appliance !\", {\n          position: toast.POSITION.BOTTOM_LEFT\n        });\n        console.log(response);\n\n        _this.setInitValue();\n      }).catch(function (error) {\n        console.log(\"I CAME HEW\");\n\n        _this.resetValues();\n\n        toast.error(\"Appliance addition failed !\", {\n          position: toast.POSITION.BOTTOM_LEFT\n        });\n        console.log(error);\n\n        _this.setInitValue();\n      });\n    };\n\n    _this.renderAddAppliance = function () {\n      return React.createElement(AddApplianceContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          margin: '10px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, \"Add New Appliance\"), React.createElement(AddAppliance, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Name\",\n        style: {\n          margin: '10px'\n        },\n        onChange: function onChange(e) {\n          return _this.handleApplianceName(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Wattage\",\n        style: {\n          margin: '10px'\n        },\n        onChange: function onChange(e) {\n          return _this.handleApplianceWattage(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      })), React.createElement(AddButton, {\n        onClick: function onClick(e) {\n          return _this.makeAddApplianceCall(e);\n        },\n        style: {\n          marginLeft: '15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, \"Add\"));\n    };\n\n    _this.renderEnergyIntensity = function () {\n      if (_this.state.energyIntensity !== 0) {\n        return React.createElement(GaugeChart, {\n          id: \"gauge-chart1\",\n          nrOfLevels: 10,\n          arcPadding: 0.1,\n          cornerRadius: 3,\n          percent: _this.state.energyIntensity,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 327\n          },\n          __self: this\n        });\n      } else {\n        return _this.renderErrorMessage();\n      }\n    };\n\n    var userName = localStorage.smartEnergy ? localStorage.smartEnergy.userName : 1;\n    var URL = \"ws://\".concat(settings.API_URL, \"/EnergyConsumptionWS/\").concat(userName);\n    var kafkaURL = \"ws://\".concat(settings.API_URL, \"/kafka_Actor_stream?topic=testtopic\");\n    var tableURL = \"ws://\".concat(settings.API_URL, \"EnergyConsumptionHistoryWS/\").concat(userName, \"/1\");\n    _this.ws = new WebSocket(URL);\n    _this.wsKafka = new WebSocket(kafkaURL);\n    _this.wsTable = new WebSocket(tableURL);\n    _this.state = {\n      energyResult: [],\n      socketData: [],\n      pieJson: [],\n      totalEnergy: [],\n      greenEnergyGenerated: [],\n      energyIntensity: 0,\n      applianceName: '',\n      applianceWattage: '',\n      tableData: []\n    };\n    setInterval(function () {\n      var _this2 = this;\n\n      if (this.ws.onopen == null) {\n        this.ws.onopen = function () {\n          _this2.ws.send(\"\");\n        };\n      } else {\n        this.ws.send(\"\");\n      }\n    }.bind(_assertThisInitialized(_assertThisInitialized(_this))), 1000);\n\n    _this.ws.onmessage = function (evt) {\n      // on receiving a message, add it to the list of messages\n      var message = JSON.parse(evt.data); // this.addMessage(message)\n\n      var pieElement = [{\n        \"id\": \"refrigeration\",\n        \"label\": \"Refrigeration\",\n        \"value\": message.refrigeration,\n        \"color\": \"hsl(219, 70%, 50%)\"\n      }, {\n        \"id\": \"plugLoads\",\n        \"label\": \"Plug Loads\",\n        \"value\": message.plugLoads,\n        \"color\": \"hsl(100, 70%, 50%)\"\n      }, {\n        \"id\": \"evCharge\",\n        \"label\": \"EV Charge\",\n        \"value\": message.evCharge,\n        \"color\": \"hsl(219, 70%, 50%)\"\n      }, {\n        \"id\": \"others\",\n        \"label\": \"Others\",\n        \"value\": message.others,\n        \"color\": \"hsl(126, 70%, 50%)\"\n      }];\n\n      _this.setState({\n        pieJson: pieElement\n      });\n    };\n\n    _this.ws.onclose = function () {\n      console.log('disconnected');\n\n      _this.setState({\n        ws: new WebSocket(URL)\n      });\n    };\n\n    setInterval(function () {\n      var _this3 = this;\n\n      if (this.wsKafka.onopen == null) {\n        this.wsKafka.onopen = function () {\n          _this3.wsKafka.send(\"\");\n        };\n      } else {\n        this.wsKafka.send(\"\");\n      }\n    }.bind(_assertThisInitialized(_assertThisInitialized(_this))), 1000);\n\n    _this.wsKafka.onmessage = function (evt) {\n      // on receiving a message, add it to the list of messages\n      var message = JSON.parse(evt.data);\n      var energyIntensityPercent = message.totalEnergyConsumption / 2000;\n\n      _this.setState({\n        energyIntensity: energyIntensityPercent,\n        greenEnergyGenerated: message.totalEnergyGeneration,\n        totalEnergy: message.totalEnergyConsumption\n      });\n    };\n\n    _this.wsKafka.onclose = function () {\n      console.log('disconnected');\n\n      _this.setState({\n        wsKafka: new WebSocket(URL)\n      });\n    };\n\n    setInterval(function () {\n      var _this4 = this;\n\n      if (this.wsTable.onopen == null) {\n        this.wsTable.onopen = function () {\n          _this4.wsTable.send(\"\");\n        };\n      } else {\n        this.wsTable.send(\"\");\n      }\n    }.bind(_assertThisInitialized(_assertThisInitialized(_this))), 1000);\n\n    _this.wsTable.onmessage = function (evt) {\n      // on receiving a message, add it to the list of messages\n      var message = JSON.parse(evt.data);\n      var convertedJSON = '\\'[' + message + '\\']';\n      convertedJSON = convertedJSON.replace(/\\^/g, \",\");\n      convertedJSON = JSON.parse(convertedJSON);\n\n      _this.setState({\n        tableData: convertedJSON\n      });\n    };\n\n    _this.wsTable.onclose = function () {\n      console.log('disconnected');\n\n      _this.setState({\n        wsTable: new WebSocket(URL)\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Dashboard, [{\n    key: \"render\",\n    value: function render() {\n      var columns = [{\n        name: 'Prosumer Id',\n        selector: 'prosumerId'\n      }, {\n        name: 'Refrigeration',\n        selector: 'refrigeration'\n      }, {\n        name: 'Plug Loads',\n        selector: 'plugLoads'\n      }, {\n        name: 'evCharge',\n        selector: 'evCharge'\n      }, {\n        name: 'Others',\n        selector: 'others'\n      }];\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, React.createElement(NavBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }), React.createElement(MainBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }, React.createElement(Row, {\n        style: {\n          height: '40%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }, React.createElement(Col, {\n        style: {\n          height: '100%',\n          width: 'auto'\n        },\n        className: \"block-example border border-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373\n        },\n        __self: this\n      }, \"Energy Consumption History\"), React.createElement(DataTable, {\n        style: {\n          height: \"23rem\",\n          background: 'rgba(255,255,255,0.11)',\n          margin: '1.5rem'\n        },\n        columns: columns,\n        data: this.state.tableData,\n        responsive: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      })), React.createElement(Col, {\n        className: \"block-example border border-dark\",\n        style: {\n          height: '100%',\n          width: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382\n        },\n        __self: this\n      }, \"Current Appliance Usage\"), this.renderPieChart())), React.createElement(Row, {\n        style: {\n          height: '40%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386\n        },\n        __self: this\n      }, React.createElement(Col, {\n        className: \"block-example border border-dark\",\n        style: {\n          height: '100%',\n          width: 'auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388\n        },\n        __self: this\n      }, \"Energy Intensity\"), this.renderEnergyIntensity()), React.createElement(Col, {\n        className: \"block-example border border-dark\",\n        style: {\n          height: '100%',\n          width: 'auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393\n        },\n        __self: this\n      }, \"CARBON FOOTPRINT\"), React.createElement(Col, {\n        style: {\n          height: '50%',\n          width: 'auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      }, \"Total Energy Consumption\"), React.createElement(ProgressBar, {\n        style: {\n          height: '20%',\n          width: '80%'\n        },\n        striped: true,\n        variant: \"success\",\n        now: this.state.totalEnergy,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396\n        },\n        __self: this\n      })), React.createElement(Col, {\n        style: {\n          height: '50%',\n          width: 'auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399\n        },\n        __self: this\n      }, \"Total Energy Generation\"), React.createElement(ProgressBar, {\n        style: {\n          height: '20%',\n          width: '80%'\n        },\n        striped: true,\n        variant: \"success\",\n        now: this.state.greenEnergyGenerated,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404\n        },\n        __self: this\n      }, this.renderAddAppliance())), React.createElement(ToastContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Dashboard;\n}(React.Component);\n\nexport default Dashboard;","map":{"version":3,"sources":["/home/swastik/workspace/gitRepo/wacc/2019_group_30_s4151968_s4056167_s3922782/front-end/src/containers/dashboard/dashboard.js"],"names":["React","Fragment","NavBar","ResponsiveBar","ResponsivePie","Row","Col","ProgressBar","MainBody","AddAppliance","AddApplianceContainer","AddButton","axios","GaugeChart","toast","ToastContainer","settings","DataTable","Dashboard","props","addMessage","message","setState","state","messages","submitMessage","messageString","name","ws","send","JSON","stringify","renderPieChart","pieJson","top","right","bottom","left","scheme","from","modifiers","anchor","direction","translateY","itemWidth","itemHeight","itemTextColor","symbolSize","symbolShape","effects","on","style","renderErrorMessage","renderBarChart","energyResult","length","tickSize","tickPadding","tickRotation","legendPosition","handleApplianceName","e","applianceName","target","value","handleApplianceWattage","applianceWattage","resetValues","makeAddApplianceCall","preventDefault","url","API_URL","post","then","response","success","position","POSITION","BOTTOM_LEFT","console","log","setInitValue","catch","error","renderAddAppliance","margin","marginLeft","renderEnergyIntensity","energyIntensity","userName","localStorage","smartEnergy","URL","kafkaURL","tableURL","WebSocket","wsKafka","wsTable","socketData","totalEnergy","greenEnergyGenerated","tableData","setInterval","onopen","bind","onmessage","evt","parse","data","pieElement","refrigeration","plugLoads","evCharge","others","onclose","energyIntensityPercent","totalEnergyConsumption","totalEnergyGeneration","convertedJSON","replace","columns","selector","height","width","background","Component"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react';\nimport NavBar from '../navbar/navbar';\nimport { ResponsiveBar } from '@nivo/bar';\nimport { ResponsivePie } from '@nivo/pie'\nimport { Row, Col, ProgressBar } from 'react-bootstrap';\nimport {\n    MainBody, AddAppliance,\n    AddApplianceContainer, AddButton\n} from './dashboardStyles';\nimport axios from 'axios';\nimport GaugeChart from 'react-gauge-chart';\nimport { toast, ToastContainer } from 'react-toastify';\nimport settings from '../../config/config';\nimport DataTable from 'react-data-table-component';\n\n\nclass Dashboard extends React.Component {\n\n    constructor(props) {\n        super(props);\n        const userName = localStorage.smartEnergy ? localStorage.smartEnergy.userName : 1;\n        const URL = `ws://${settings.API_URL}/EnergyConsumptionWS/${userName}`;\n        const kafkaURL = `ws://${settings.API_URL}/kafka_Actor_stream?topic=testtopic`;\n        const tableURL = `ws://${settings.API_URL}EnergyConsumptionHistoryWS/${userName}/1`;\n        this.ws = new WebSocket(URL)\n        this.wsKafka = new WebSocket(kafkaURL);\n        this.wsTable = new WebSocket(tableURL);\n        this.state = {\n            energyResult: [],\n            socketData: [],\n            pieJson: [],\n            totalEnergy: [],\n            greenEnergyGenerated: [],\n            energyIntensity: 0,\n            applianceName: '',\n            applianceWattage: '',\n            tableData: []\n        }\n        setInterval(function () {\n            if (this.ws.onopen == null) {\n                this.ws.onopen = () => {\n                    this.ws.send(\"\");\n                }\n            } else {\n                this.ws.send(\"\");\n            }\n        }.bind(this), 1000);\n\n        this.ws.onmessage = evt => {\n            // on receiving a message, add it to the list of messages\n            const message = JSON.parse(evt.data)\n            // this.addMessage(message)\n            var pieElement = [{\n                \"id\": \"refrigeration\",\n                \"label\": \"Refrigeration\",\n                \"value\": message.refrigeration,\n                \"color\": \"hsl(219, 70%, 50%)\"\n            },\n            {\n                \"id\": \"plugLoads\",\n                \"label\": \"Plug Loads\",\n                \"value\": message.plugLoads,\n                \"color\": \"hsl(100, 70%, 50%)\"\n            },\n            {\n                \"id\": \"evCharge\",\n                \"label\": \"EV Charge\",\n                \"value\": message.evCharge,\n                \"color\": \"hsl(219, 70%, 50%)\"\n            },\n            {\n                \"id\": \"others\",\n                \"label\": \"Others\",\n                \"value\": message.others,\n                \"color\": \"hsl(126, 70%, 50%)\"\n            }];\n\n            this.setState({\n                pieJson: pieElement\n            });\n        }\n\n        this.ws.onclose = () => {\n            console.log('disconnected')\n            this.setState({\n                ws: new WebSocket(URL),\n            });\n        }\n\n        setInterval(function () {\n            if (this.wsKafka.onopen == null) {\n                this.wsKafka.onopen = () => {\n                    this.wsKafka.send(\"\");\n                }\n            } else {\n                this.wsKafka.send(\"\");\n            }\n        }.bind(this), 1000);\n\n\n        this.wsKafka.onmessage = evt => {\n            // on receiving a message, add it to the list of messages\n            const message = JSON.parse(evt.data);\n            const energyIntensityPercent = message.totalEnergyConsumption / 2000;\n            this.setState({\n                energyIntensity: energyIntensityPercent,\n                greenEnergyGenerated: message.totalEnergyGeneration,\n                totalEnergy: message.totalEnergyConsumption\n            });\n        }\n\n        this.wsKafka.onclose = () => {\n            console.log('disconnected')\n            this.setState({\n                wsKafka: new WebSocket(URL),\n            })\n        }\n\n        setInterval(function () {\n            if (this.wsTable.onopen == null) {\n                this.wsTable.onopen = () => {\n                    this.wsTable.send(\"\");\n                }\n            } else {\n                this.wsTable.send(\"\");\n            }\n        }.bind(this), 1000);\n\n\n        this.wsTable.onmessage = evt => {\n            // on receiving a message, add it to the list of messages\n            const message = JSON.parse(evt.data);\n            let convertedJSON = '\\'['+ message + '\\']';\n            convertedJSON = convertedJSON.replace(/\\^/g, \",\");\n            convertedJSON = JSON.parse(convertedJSON);\n            this.setState({\n                tableData: convertedJSON\n            });\n        }\n\n        this.wsTable.onclose = () => {\n            console.log('disconnected')\n            this.setState({\n                wsTable: new WebSocket(URL),\n            })\n        }\n    }\n\n    addMessage = message =>\n        this.setState(state => ({ messages: [message, ...state.messages] }))\n\n    submitMessage = messageString => {\n        // on submitting the ChatInput form, send the message, add it to the list and reset the input\n        const message = { name: this.state.name, message: messageString }\n        this.ws.send(JSON.stringify(message))\n        this.addMessage(message)\n    }\n\n    renderPieChart = () => {\n        const { pieJson } = this.state;\n        if (pieJson) {\n            return (\n                <ResponsivePie\n                    data={this.state.pieJson}\n                    margin={{ top: 40, right: 80, bottom: 80, left: 80 }}\n                    innerRadius={0.6}\n                    padAngle={0.7}\n                    cornerRadius={3}\n                    colors={{ scheme: 'category10' }}\n                    borderWidth={1}\n                    borderColor={{ from: 'color', modifiers: [['darker', 0.2]] }}\n                    enableRadialLabels={false}\n                    radialLabelsSkipAngle={10}\n                    radialLabelsTextXOffset={6}\n                    radialLabelsTextColor=\"#333333\"\n                    radialLabelsLinkOffset={0}\n                    radialLabelsLinkDiagonalLength={16}\n                    radialLabelsLinkHorizontalLength={24}\n                    radialLabelsLinkStrokeWidth={1}\n                    radialLabelsLinkColor={{ from: 'color' }}\n                    slicesLabelsSkipAngle={10}\n                    slicesLabelsTextColor=\"#333333\"\n                    animate={true}\n                    motionStiffness={90}\n                    motionDamping={15}\n                    legends={[\n                        {\n                            anchor: 'bottom',\n                            direction: 'row',\n                            translateY: 56,\n                            itemWidth: 100,\n                            itemHeight: 50,\n                            itemTextColor: '#000',\n                            symbolSize: 20,\n                            symbolShape: 'circle',\n                            effects: [\n                                {\n                                    on: 'hover',\n                                    style: {\n                                        itemTextColor: '#000'\n                                    }\n                                }\n                            ]\n                        }\n                    ]}\n                />\n            )\n        }\n        else {\n            return (\n                this.renderErrorMessage()\n            )\n        }\n\n    }\n\n    renderErrorMessage = () => {\n        return (\n            <div>\n                Something went wrong!\n            </div>\n        )\n    }\n\n    renderBarChart = () => {\n        const { energyResult } = this.state;\n        if (energyResult.length > 0) {\n            return (\n                <ResponsiveBar\n                    data={this.state.energyResult}\n                    keys={['watt']}\n                    indexBy=\"appliance\"\n                    margin={{ top: 50, right: 50, bottom: 50, left: 100 }}\n                    padding={0.2}\n                    layout=\"horizontal\"\n                    colors={{ scheme: 'category10' }}\n                    borderRadius={2}\n                    borderWidth={2}\n                    borderColor={{ from: 'color', modifiers: [['darker', 1.6]] }}\n                    axisTop={null}\n                    axisRight={null}\n                    axisBottom={null}\n                    axisLeft={{\n                        tickSize: 0,\n                        tickPadding: 4,\n                        tickRotation: 0,\n                        legendPosition: 'middle',\n                    }}\n                    labelSkipWidth={12}\n                    labelSkipHeight={12}\n                    labelTextColor={{ from: 'color', modifiers: [['darker', 5.6]] }}\n                    animate={true}\n                    motionStiffness={90}\n                    motionDamping={15}\n                />\n            )\n        }\n        else {\n            return (\n                this.renderErrorMessage()\n            )\n        }\n\n\n    }\n\n\n    handleApplianceName = (e) => {\n        this.setState({ applianceName: e.target.value });\n    }\n\n    handleApplianceWattage = (e) => {\n        this.setState({ applianceWattage: e.target.value });\n    }\n\n    resetValues = () => {\n        this.setState({\n            applianceWattage: '',\n            applianceName: ''\n        })\n    }\n\n    makeAddApplianceCall = (e) => {\n        e.preventDefault();\n        const { applianceName, applianceWattage } = this.state;\n        const url = `${settings.API_URL}/addAppliance/${applianceName}/${applianceWattage}`\n        axios.post(url)\n            .then((response) => {\n                this.resetValues();\n                toast.success(\"Successfully added Appliance !\", {\n                    position: toast.POSITION.BOTTOM_LEFT\n                })\n                console.log(response);\n                this.setInitValue();\n            })\n            .catch((error) => {\n                console.log(\"I CAME HEW\");\n                this.resetValues();\n                toast.error(\"Appliance addition failed !\", {\n                    position: toast.POSITION.BOTTOM_LEFT\n                })\n                console.log(error);\n                this.setInitValue();\n            });\n    }\n\n    renderAddAppliance = () => {\n        return (\n            <AddApplianceContainer>\n                <div style={{ margin: '10px' }}>\n                    Add New Appliance\n                </div>\n                <AddAppliance>\n                    <input type=\"text\" placeholder=\"Name\" style={{ margin: '10px' }} onChange={(e) => this.handleApplianceName(e)} />\n                    <input type=\"text\" placeholder=\"Wattage\" style={{ margin: '10px' }} onChange={(e) => this.handleApplianceWattage(e)} />\n                </AddAppliance>\n                <AddButton onClick={e => this.makeAddApplianceCall(e)} style={{ marginLeft: '15px' }}>\n                    Add\n                </AddButton>\n            </AddApplianceContainer>\n        )\n    }\n\n    renderEnergyIntensity = () => {\n        if (this.state.energyIntensity !== 0) {\n            return (\n                <GaugeChart id=\"gauge-chart1\"\n                    nrOfLevels={10}\n                    arcPadding={0.1}\n                    cornerRadius={3}\n                    percent={this.state.energyIntensity}\n                />\n            )\n        }\n        else {\n            return (\n                this.renderErrorMessage()\n            )\n        }\n\n    }\n\n    render() {\n        const columns = [\n            {\n                name: 'Prosumer Id',\n                selector: 'prosumerId'\n            },\n            {\n                name: 'Refrigeration',\n                selector: 'refrigeration'\n            },\n            {\n                name: 'Plug Loads',\n                selector: 'plugLoads'\n            },\n            {\n                name: 'evCharge',\n                selector: 'evCharge'\n            },\n            {\n                name: 'Others',\n                selector: 'others'\n            },\n        ];\n        return (\n            <Fragment>\n                <NavBar></NavBar>\n                <MainBody>\n                    {/* <Container> */}\n                    <Row style={{ height: '40%' }}>\n                        <Col style={{ height: '100%', width: 'auto' }} className=\"block-example border border-dark\">\n                            <h2 className=\"card-title\">Energy Consumption History</h2>\n                            <DataTable\n                                style={{ height: \"23rem\", background: 'rgba(255,255,255,0.11)', margin: '1.5rem' }}\n                                columns={columns}\n                                data={this.state.tableData}\n                                responsive\n                            />\n                        </Col>\n                        <Col className=\"block-example border border-dark\" style={{ height: '100%', width: '100%' }}>\n                            <h2 className=\"card-title\">Current Appliance Usage</h2>\n                            {this.renderPieChart()}\n                        </Col>\n                    </Row>\n                    <Row style={{ height: '40%' }}>\n                        <Col className=\"block-example border border-dark\" style={{ height: '100%', width: 'auto' }}>\n                            <h2 className=\"card-title\">Energy Intensity</h2>\n                            {this.renderEnergyIntensity()}\n\n                        </Col>\n                        <Col className=\"block-example border border-dark\" style={{ height: '100%', width: 'auto' }}>\n                            <h2 className=\"card-title\">CARBON FOOTPRINT</h2>\n                            <Col style={{ height: '50%', width: 'auto' }}>\n                                <h3>Total Energy Consumption</h3>\n                                <ProgressBar style={{ height: '20%', width: '80%' }} striped variant=\"success\" now={this.state.totalEnergy} />\n                            </Col>\n                            <Col style={{ height: '50%', width: 'auto' }}>\n                                <h3>Total Energy Generation</h3>\n                                <ProgressBar style={{ height: '20%', width: '80%' }} striped variant=\"success\" now={this.state.greenEnergyGenerated} />\n                            </Col>\n                        </Col>\n                    </Row>\n                    <div>\n                        {this.renderAddAppliance()}\n                    </div>\n                </MainBody>\n                <ToastContainer />\n            </Fragment>\n\n        );\n    }\n}\n\nexport default Dashboard"]},"metadata":{},"sourceType":"module"}